@using Microsoft.AspNetCore.Identity
@using cv.deltareco.com.Models
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@if (!SignInManager.IsSignedIn(User))
{
	<script src="https://accounts.google.com/gsi/client" async></script>
	<script>
		window.onload = function () {
			google.accounts.id.initialize({
				client_id: 'YOUR_GOOGLE_CLIENT_ID',
				callback: handleCredentialResponse
			});
			google.accounts.id.prompt();
		};

		function handleCredentialResponse(credential) {
			fetch('/Account/OneTapSignIn', {
				method: 'POST',
				body: JSON.stringify(credential),
				headers: { 'Content-Type': 'application/json' }
			})
			.then(res => res.json())
			.then(data => {
				if (data.success) location.reload();
				else alert("Failed");
			});
		}
	</script>
}


<!-- Submenu Script -->
<script>
	document.addEventListener("DOMContentLoaded", function () {
		document.querySelectorAll(".submenu > a").forEach(function (element) {
			element.addEventListener("click", function (e) {
				e.preventDefault();
				let submenu = this.parentElement.querySelector("ul");
				submenu.style.display = submenu.style.display === "block" ? "none" : "block";
			});
		});
	});
</script>
<!DOCTYPE html>
<html lang="en" data-layout="transparent">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0">
	<meta name="description" content="Smarthr - Bootstrap Admin Template">
	<meta name="keywords" content="admin, estimates, bootstrap, business, html5, responsive, Projects">
	<meta name="author" content="Dreams technologies - Bootstrap Admin Template">
	<meta name="robots" content="noindex, nofollow">
	<title>CV Delta Reco</title>
	<style>
		/* SUCCESS TOAST */
		.custom-toast-success {
			background: rgba(40, 167, 69, 0.9) !important; /* Modern Green */
			backdrop-filter: blur(8px);
			color: #fff !important;
			padding: 12px 18px !important;
			font-size: 14px !important;
			border-radius: 12px !important;
			box-shadow: 0 4px 20px rgba(0,0,0,0.25) !important;
		}

		/* ERROR TOAST */
		.custom-toast-error {
			background: rgba(220, 53, 69, 0.9) !important; /* Modern Red */
			backdrop-filter: blur(8px);
			color: #fff !important;
			padding: 12px 18px !important;
			font-size: 14px !important;
			border-radius: 12px !important;
			box-shadow: 0 4px 20px rgba(0,0,0,0.25) !important;
		}

		/* Title text */
		.swal2-title {
			font-size: 14px !important;
			font-weight: 500 !important;
			margin: 0 !important;
		}

		/* Icon fix */
		.swal2-icon {
			margin-right: 8px !important;
		}
	</style>
	<!-- Favicon -->
	<link rel="shortcut icon" type="image/x-icon" href="~/assets/img/favicon.png">

	<!-- Apple Touch Icon -->
	<link rel="apple-touch-icon" sizes="180x180" href="~/assets/img/apple-touch-icon.png">
	<!-- Modern Dark Theme -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@@sweetalert2/theme-dark@5/dark.css">
	<!-- Theme Script js -->
	<script src="~/assets/js/theme-script.js"></script>

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="~/assets/css/bootstrap.min.css">

	<!-- Feather CSS -->
	<link rel="stylesheet" href="~/assets/plugins/icons/feather/feather.css">
	<link rel="stylesheet"
		  href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" />

	<!-- Tabler Icon CSS -->
	<link rel="stylesheet" href="~/assets/plugins/tabler-icons/tabler-icons.min.css">

	<!-- Select2 CSS -->
	<link rel="stylesheet" href="~/assets/plugins/select2/css/select2.min.css">

	<!-- Fontawesome CSS -->
	<link rel="stylesheet" href="~/assets/plugins/fontawesome/css/fontawesome.min.css">
	<link rel="stylesheet" href="~/assets/plugins/fontawesome/css/all.min.css">

	<!-- Datetimepicker CSS -->
	<link rel="stylesheet" href="~/assets/css/bootstrap-datetimepicker.min.css">

	<!-- Summernote CSS -->
	<link rel="stylesheet" href="~/assets/plugins/summernote/summernote-lite.min.css">

	<!-- Bootstrap Tagsinput CSS -->
	<link rel="stylesheet" href="~/assets/plugins/bootstrap-tagsinput/bootstrap-tagsinput.css">

	<!-- Daterangepikcer CSS -->
	<link rel="stylesheet" href="~/assets/plugins/daterangepicker/daterangepicker.css">

	<!-- Color Picker Css -->
	<link rel="stylesheet" href="~/assets/plugins/flatpickr/flatpickr.min.css">
	<link rel="stylesheet" href="~/assets/plugins/@@simonwep/pickr/themes/nano.min.css">
	
	<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css" />
	<!-- Main CSS -->
	<link rel="stylesheet" href="~/assets/css/style.css">

</head>
@RenderSection("Scripts", required: false)

<body class="data-layout-transparent">
	<!-- HEADER -->
    @await Html.PartialAsync("_AdminHeader")

	
			<!-- SIDEBAR -->
			@await Html.PartialAsync("_AdminSidebar")

			<!-- MAIN CONTENT -->
			<div class="content-wrapper flex-grow-1">
				@RenderBody()
			</div>

		</div>

	<script src="~/assets/js/jquery-3.7.1.min.js"></script>

	<!-- Bootstrap Core JS -->
	<script src="~/assets/js/bootstrap.bundle.min.js"></script>

	<!-- Feather Icon JS -->
	<script src="~/assets/js/feather.min.js"></script>

	<!-- Slimscroll JS -->
	<script src="~/assets/js/jquery.slimscroll.min.js"></script>

	<!-- Chart JS -->
	<script src="~/assets/plugins/apexchart/apexcharts.min.js"></script>
	<script src="~/assets/plugins/apexchart/chart-data.js"></script>

	<!-- Chart JS -->
	<script src="~/assets/plugins/chartjs/chart.min.js"></script>
	<script src="~/assets/plugins/chartjs/chart-data.js"></script>

	<!-- Datetimepicker JS -->
	<script src="~/assets/js/moment.min.js"></script>
	<script src="~/assets/js/bootstrap-datetimepicker.min.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
	<script src="~/assets/plugins/daterangepicker/daterangepicker.js"></script>

	<!-- Bootstrap Tagsinput JS -->
	<script src="~/assets/plugins/bootstrap-tagsinput/bootstrap-tagsinput.js"></script>

	<!-- Summernote JS -->
	<script src="~/assets/plugins/summernote/summernote-lite.min.js"></script>

	<!-- Select2 JS -->
	<script src="~/assets/plugins/select2/js/select2.min.js"></script>

	<!-- Color Picker JS -->
	<script src="~/assets/plugins/@@simonwep/pickr/pickr.es5.min.js"></script>

	<!-- Custom JS -->
	<script src="~/assets/js/todo.js"></script>
	<script src="~/assets/js/theme-colorpicker.js"></script>
	<script src="~/assets/js/script.js"></script>
	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
	<!-- SweetAlert2 CDN -->

	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

	@if (TempData["success"] != null)
	{
		<script>
			Swal.fire({
				toast: true,
				position: 'top-end',
				icon: 'success',
				title: '@TempData["success"]',
				showConfirmButton: false,
				timer: 2500,
				timerProgressBar: true,
				customClass: {
					popup: 'custom-toast-success'
				}
			});
		</script>
	}

	@if (TempData["error"] != null)
	{
		<script>
			Swal.fire({
				toast: true,
				position: 'top-end',
				icon: 'error',
				title: '@TempData["error"]',
				showConfirmButton: false,
				timer: 2500,
				timerProgressBar: true,
				customClass: {
					popup: 'custom-toast-error'
				}
			});
		</script>
	}


</body>

</html>