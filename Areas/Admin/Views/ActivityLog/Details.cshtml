@model ActivityLog

@{
    ViewData["Title"] = "Activity Log Details";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<style>
    .detail-box {
        border: 1px solid #e5e5e5;
        padding: 12px 15px;
        border-radius: 8px;
        background: #fafafa;
        font-weight: 600;
    }

    .section-title {
        border-left: 4px solid #007bff;
        padding-left: 10px;
        font-weight: bold;
        margin-bottom: 12px;
        margin-top: 20px;
    }

    .card-custom {
        border-radius: 15px !important;
        border: none;
        background: #ffffff;
        box-shadow: 0 6px 20px rgba(0,0,0,0.08);
    }
</style>


<div class="page-wrapper">
    <div class="content">

        <!-- Header -->
        <div class="page-header d-flex justify-content-between align-items-center mb-4">
            <div>
                <h3 class="page-title text-primary fw-bold">
                    <i class="fa fa-eye me-2"></i> Activity Log Details
                </h3>
                <ul class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/Admin">Admin</a></li>
                    <li class="breadcrumb-item"><a href="/Admin/ActivityLogs">Activity Logs</a></li>
                    <li class="breadcrumb-item active">Details</li>
                </ul>
            </div>

            <a asp-action="Index" class="btn btn-secondary shadow-sm">
                <i class="fa fa-arrow-left me-1"></i> Back
            </a>
        </div>


        <!-- Details Card -->
        <div class="card card-custom">
            <div class="card-body p-4">

                <!-- BASIC DETAILS -->
                <div class="section-title text-primary">
                    Basic Information
                </div>

                <div class="row g-3 mb-4">

                    <div class="col-md-3">
                        <label class="text-muted small">Log ID</label>
                        <div class="detail-box">@Model.Id</div>
                    </div>

                    <div class="col-md-3">
                        <label class="text-muted small">Table Name</label>
                        <div class="detail-box">@Model.TableName</div>
                    </div>

                    <div class="col-md-3">
                        <label class="text-muted small">Record ID</label>
                        <div class="detail-box">@Model.RecordId</div>
                    </div>

                    <div class="col-md-3">
                        <label class="text-muted small">Action</label>
                        <div>
                            @if (Model.ActionType == "Create")
                            {
                                <span class="badge bg-success px-3 py-2">Create</span>
                            }
                            else if (Model.ActionType == "Update")
                            {
                                <span class="badge bg-warning text-dark px-3 py-2">Update</span>
                            }
                            else if (Model.ActionType == "Delete")
                            {
                                <span class="badge bg-danger px-3 py-2">Delete</span>
                            }
                            else
                            {
                                <span class="badge bg-secondary px-3 py-2">@Model.ActionType</span>
                            }
                        </div>
                    </div>

                </div>



                <!-- USER DETAILS -->
                <div class="section-title text-primary">
                    Action Performed By
                </div>

                <div class="row g-3 mb-4">

                    <div class="col-md-6">
                        <label class="text-muted small">User</label>
                        <div class="detail-box">@Model.PerformedBy</div>
                    </div>

                    <div class="col-md-6">
                        <label class="text-muted small">Date & Time</label>
                        <div class="detail-box">
                            @Model.PerformedAt.ToString("dd MMM yyyy, hh:mm tt")
                        </div>
                    </div>

                </div>



                <!-- OLD DATA SECTION -->
                <div class="section-title">Old Data</div>

                <div class="row g-3 mb-4">
                    @{
                        var oldData = new Dictionary<string, string>();
                        try
                        {
                            if (!string.IsNullOrEmpty(Model.OldValues))
                            {
                                oldData = Newtonsoft.Json.JsonConvert
                                .DeserializeObject<Dictionary<string, string>>(Model.OldValues);
                            }
                        }
                        catch { oldData = new Dictionary<string, string>(); }
                    }

                    @if (oldData.Count == 0)
                    {
                        <div class="col-12">
                            <div class="detail-box">No Old Data Found</div>
                        </div>
                    }
                    else
                    {
                        foreach (var item in oldData)
                        {
                            <div class="col-md-4">
                                <label class="text-muted small">@item.Key</label>
                                <div class="detail-box">@item.Value</div>
                            </div>
                        }
                    }
                </div>



                <!-- NEW DATA SECTION -->
                <div class="section-title">New Data</div>

                <div class="row g-3 mb-4">
                    @{
                        var newData = new Dictionary<string, string>();
                        try
                        {
                            if (!string.IsNullOrEmpty(Model.NewValues))
                            {
                                newData = Newtonsoft.Json.JsonConvert
                                .DeserializeObject<Dictionary<string, string>>(Model.NewValues);
                            }
                        }
                        catch { newData = new Dictionary<string, string>(); }
                    }

                    @if (newData.Count == 0)
                    {
                        <div class="col-12">
                            <div class="detail-box">No New Data Found</div>
                        </div>
                    }
                    else
                    {
                        foreach (var item in newData)
                        {
                            <div class="col-md-4">
                                <label class="text-muted small">@item.Key</label>
                                <div class="detail-box">@item.Value</div>
                            </div>
                        }
                    }
                </div>



                <div class="mt-4 text-end">
                    <a asp-action="Index" class="btn btn-primary px-4 shadow-sm">
                        <i class="fa fa-arrow-left me-1"></i> Back to Logs
                    </a>
                </div>

            </div>
        </div>

    </div>
</div>
